<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-output_data" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Salida del SP Compras.IndicadoresMatriz | My Site</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://jeissonmsa.github.io/IndicadoresMatriz/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://jeissonmsa.github.io/IndicadoresMatriz/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://jeissonmsa.github.io/IndicadoresMatriz/docs/output_data"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Salida del SP Compras.IndicadoresMatriz | My Site"><meta data-rh="true" name="description" content="Campos Principales"><meta data-rh="true" property="og:description" content="Campos Principales"><link data-rh="true" rel="icon" href="/IndicadoresMatriz/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://jeissonmsa.github.io/IndicadoresMatriz/docs/output_data"><link data-rh="true" rel="alternate" href="https://jeissonmsa.github.io/IndicadoresMatriz/docs/output_data" hreflang="en"><link data-rh="true" rel="alternate" href="https://jeissonmsa.github.io/IndicadoresMatriz/docs/output_data" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Salida del SP Compras.IndicadoresMatriz","item":"https://jeissonmsa.github.io/IndicadoresMatriz/docs/output_data"}]}</script><link rel="alternate" type="application/rss+xml" href="/IndicadoresMatriz/blog/rss.xml" title="My Site RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/IndicadoresMatriz/blog/atom.xml" title="My Site Atom Feed"><link rel="stylesheet" href="/IndicadoresMatriz/assets/css/styles.53c0388e.css">
<script src="/IndicadoresMatriz/assets/js/runtime~main.d3f4c832.js" defer="defer"></script>
<script src="/IndicadoresMatriz/assets/js/main.75b30b9a.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/IndicadoresMatriz/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/IndicadoresMatriz/"><div class="navbar__logo"><img src="/IndicadoresMatriz/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/IndicadoresMatriz/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">My Site</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/IndicadoresMatriz/docs/elements/originRoute">Tutorial</a><a class="navbar__item navbar__link" href="/IndicadoresMatriz/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/IndicadoresMatriz/docs/elements/originRoute">elements</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/IndicadoresMatriz/docs/format">Actualización del Formato de Datos para Inventario y Logística</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/IndicadoresMatriz/docs">Análisis IndicadoresMatriz</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/IndicadoresMatriz/docs/legible_output_data">FÓRMULAS DE GESTIÓN DE INVENTARIOS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/IndicadoresMatriz/docs/output_data">Salida del SP Compras.IndicadoresMatriz</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/IndicadoresMatriz/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Salida del SP Compras.IndicadoresMatriz</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Salida del SP <code>Compras.IndicadoresMatriz</code></h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="campos-principales">Campos Principales<a href="#campos-principales" class="hash-link" aria-label="Direct link to Campos Principales" title="Direct link to Campos Principales">​</a></h2>
<div><p>Todos los campos que retorna están en <a href="/IndicadoresMatriz/docs/elements/with.md_WTCONSULTAFINAL">_WTCONSULTAFINAL</a> y el nombre de este datos en el resto del sp sera tal cual como el titulo pero sin la palabra matriz (si hay algún cambio se colocara el alias)</p></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="matrizaportenacional">MatrizAporteNacional<a href="#matrizaportenacional" class="hash-link" aria-label="Direct link to MatrizAporteNacional" title="Direct link to MatrizAporteNacional">​</a></h3>
<ul>
<li><strong>Campo</strong>: <code>IIF(g.MaterialImportado = 1, &#x27;SI&#x27;, &#x27;NO&#x27;)</code></li>
<li><strong>Origen</strong>:<!-- -->
<div data-toggle-list="true"></div>
<ul>
<li><a href="/IndicadoresMatriz/docs/elements/with#_wtconsultabase">_WTCONSULTABASE</a>&gt;<a href="/IndicadoresMatriz/docs/elements/with#_inventario">_Inventario</a>
<ul>
<li><code>IIF(g.MaterialImportado = 1, &#x27;SI&#x27;, &#x27;NO&#x27;) AporteNacional</code>
<ul>
<li><strong>g</strong>: <a href="/IndicadoresMatriz/docs/elements/tables#genmateriales">genMateriales</a> (campo <code>MaterialImportado</code>)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>Descripción</strong>: Clasifica el material como nacional o importado según su procedencia</li>
<li><strong>Valores esperados</strong>: <code>&#x27;SI&#x27;</code> (importado) / <code>&#x27;NO&#x27;</code> (nacional)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="matrizidmaterial">MatrizIdMaterial<a href="#matrizidmaterial" class="hash-link" aria-label="Direct link to MatrizIdMaterial" title="Direct link to MatrizIdMaterial">​</a></h3>
<ul>
<li><strong>Origen</strong>: Campo <code>IdMaterial</code> de <a href="/IndicadoresMatriz/docs/elements/tables#genmateriales">genMateriales</a></li>
<li><strong>Descripción</strong>: Identificador único del material en el sistema</li>
<li><strong>Valores esperados</strong>: Enteros positivos (ej. 10045)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="matriznommaterial">MatriznomMaterial<a href="#matriznommaterial" class="hash-link" aria-label="Direct link to MatriznomMaterial" title="Direct link to MatriznomMaterial">​</a></h3>
<ul>
<li>
<p><strong>Fórmula</strong>: <code>CONVERT(VARCHAR(100), (CONVERT(VARCHAR(100), m.IdMaterial) + &#x27;-&#x27; + g.NomMaterial))</code></p>
</li>
<li>
<p><strong>Origen</strong>:</p>
<div data-toggle-list="true"></div>
<ul>
<li><a href="/IndicadoresMatriz/docs/elements/tables#genmateriales">genMateriales</a> (campos <code>IdMaterial</code> y <code>NomMaterial</code>)</li>
</ul>
</li>
<li>
<p><strong>Descripción</strong>: Nombre descriptivo que combina ID y nombre del material</p>
</li>
<li>
<p><strong>Valores esperados</strong>: Cadenas de texto (ej. &quot;10045-Tornillo hexagonal M6&quot;)</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="matrizinventariohoy">MatrizInventarioHoy<a href="#matrizinventariohoy" class="hash-link" aria-label="Direct link to MatrizInventarioHoy" title="Direct link to MatrizInventarioHoy">​</a></h3>
<ul>
<li>
<p><strong>Fórmula</strong>: <a href="/IndicadoresMatriz/docs/legible_output_data#inventario-actual"><code>SUM(m.istock)</code></a></p>
</li>
<li>
<p><strong>Origen</strong>:</p>
<div data-toggle-list="true"></div>
<ul>
<li><a href="/IndicadoresMatriz/docs/elements/with#_wtconsultabase">_WTCONSULTABASE</a> &gt; <code>SUM(InventarioHoy) AS InventarioHoy</code>
<ul>
<li><a href="/IndicadoresMatriz/docs/elements/with#_inventario">_Inventario</a> &gt; <code>SUM(m.istock) InventarioHoy</code>
<ul>
<li><strong>m</strong>: Tabla <a href="/IndicadoresMatriz/docs/elements/tables#almmatubicaciones">AlmMatUbicaciones</a> (campo <code>istock</code>)</li>
</ul>
</li>
</ul>
</li>
<li>
<blockquote>
<p>Filtrado por CTE <a href="/IndicadoresMatriz/docs/elements/with#_inventario">_Inventario</a> <code>ON m.IdMaterial = a.IdMaterial AND m.IdBodega = a.Idbodega</code></p>
</blockquote>
</li>
</ul>
</li>
<li>
<p><strong>Proceso</strong>: Sumatoria del stock disponible por material en todas las bodegas</p>
</li>
<li>
<p><strong>Valores esperados</strong>: Enteros ≥ 0</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="matrizconsumoanalisis">MatrizConsumoAnalisis<a href="#matrizconsumoanalisis" class="hash-link" aria-label="Direct link to MatrizConsumoAnalisis" title="Direct link to MatrizConsumoAnalisis">​</a></h3>
<ul>
<li>
<p><strong>Origen</strong>:</p>
<div data-toggle-list="true"></div>
<ul>
<li><a href="/IndicadoresMatriz/docs/elements/with#_wtconsultabase">_WTCONSULTABASE</a> &gt; <a href="/IndicadoresMatriz/docs/elements/with#_inventario">_Inventario</a>
<ul>
<li><code>ISNULL(cmh.Total, 0) AS ConsumoAnalisis</code>
<ul>
<li><strong>cmh</strong>: Vista <a href="/IndicadoresMatriz/docs/elements/view#consumomaterialhistorico">Compras.ConsumoMaterialHistorico</a>
<ul>
<li><code>SUM(Cantidad)Total</code>
<ul>
<li><strong>cantidad</strong>: vista <a href="/IndicadoresMatriz/docs/elements/view#entradasysalidas">Compras.EntradasySalidas</a>
<ul>
<li><code>DM.iCantidad Cantidad</code>
<ul>
<li><a href="/IndicadoresMatriz/docs/elements/tables#almdetmovimientos">AlmDetMovimientos</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Datos provenientes de <a href="/IndicadoresMatriz/docs/elements/tables#almdetmovimientos">AlmDetMovimientos</a></li>
</ul>
</li>
<li>
<p><strong>Descripción</strong>: Consumo histórico en el período definido por <code>@RangoMesConsumo</code></p>
</li>
<li>
<p><strong>Valores esperados</strong>: Números reales ≥ 0</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="matrizcostototal">MatrizCostoTotal<a href="#matrizcostototal" class="hash-link" aria-label="Direct link to MatrizCostoTotal" title="Direct link to MatrizCostoTotal">​</a></h3>
<ul>
<li>
<p><strong>Fórmula</strong>: <a href="/IndicadoresMatriz/docs/legible_output_data#valor-del-inventario"><code>SUM(m.istock * m.CostoProm)</code></a></p>
</li>
<li>
<p><strong>Origen</strong>:</p>
<div data-toggle-list="true"></div>
<ul>
<li><a href="/IndicadoresMatriz/docs/elements/with#_wtconsultabase">_WTCONSULTABASE</a> &gt; <a href="/IndicadoresMatriz/docs/elements/with#_inventario">_Inventario</a>
<ul>
<li><code>SUM(m.istock * m.CostoProm)</code>
<ul>
<li><strong>m</strong>: Tabla <a href="/IndicadoresMatriz/docs/elements/tables#almmatubicaciones">AlmMatUbicaciones</a></li>
</ul>
</li>
</ul>
</li>
<li>Tabla <a href="/IndicadoresMatriz/docs/elements/tables#almmatubicaciones">AlmMatUbicaciones</a> (campos <code>istock</code> y <code>CostoProm</code>)</li>
<li>Calculado en <a href="/IndicadoresMatriz/docs/elements/with#_inventario">_Inventario</a></li>
</ul>
</li>
<li>
<p><strong>Descripción</strong>: Valor monetario total del inventario disponible</p>
</li>
<li>
<p><strong>Valores esperados</strong>: Números reales ≥ 0 (en pesos colombianos)</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="matrizcontribucion">MatrizContribucion<a href="#matrizcontribucion" class="hash-link" aria-label="Direct link to MatrizContribucion" title="Direct link to MatrizContribucion">​</a></h3>
<ul>
<li>
<p><strong>Fórmula</strong>: <a href="/IndicadoresMatriz/docs/legible_output_data#importancia-del-producto"><code>(ConsumoAnalisis/costo)</code></a></p>
</li>
<li>
<p><strong>Origen</strong>:</p>
<div data-toggle-list="true"></div>
<ul>
<li><a href="/IndicadoresMatriz/docs/elements/with#_wtconsultabase">_WTCONSULTABASE</a> &gt; <a href="/IndicadoresMatriz/docs/elements/with#_operacionescontribucion">_OperacionesContribucion</a>
<ul>
<li><code>(IIF(costo IS NULL OR costo = 0,0,(ConsumoAnalisis / costo))) Contribucion</code>
<ul>
<li><strong>ConsumoAnalisis</strong>: <a href="/IndicadoresMatriz/docs/elements/with#_inventario">_Inventario</a>&gt; <code>ISNULL(cmh.Total, 0) AS ConsumoAnalisis</code>
<ul>
<li><strong>cmh</strong>: Vista <a href="/IndicadoresMatriz/docs/elements/view#consumomaterialhistorico">Compras.ConsumoMaterialHistorico</a>
<ul>
<li><code>SUM(Cantidad)Total</code>
<ul>
<li><strong>cantidad</strong>: vista <a href="/IndicadoresMatriz/docs/elements/view#entradasysalidas">Compras.EntradasySalidas</a>
<ul>
<li><code>DM.iCantidad Cantidad</code>
<ul>
<li><a href="/IndicadoresMatriz/docs/elements/tables#almdetmovimientos">AlmDetMovimientos</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>Costo</strong>: <a href="/IndicadoresMatriz/docs/elements/with#_inventario">_Inventario</a>
<ul>
<li><code>( SELECT valor FROM WT_ValorTotal WHERE g.aportenacional = aportenacional) costo</code>
<ul>
<li><strong>valor</strong>: <a href="/IndicadoresMatriz/docs/elements/with#wt_valortotal">WT_ValorTotal</a> &gt;<code>SUM(ISNULL(cmh.Total, 0)) AS valor</code>
<ul>
<li><strong>cmh</strong>: Vista <a href="/IndicadoresMatriz/docs/elements/view#consumomaterialhistorico">Compras.ConsumoMaterialHistorico</a>
<ul>
<li><code>SUM(Cantidad)Total</code>
<ul>
<li><strong>cantidad</strong>: vista <a href="/IndicadoresMatriz/docs/elements/view#entradasysalidas">Compras.EntradasySalidas</a>
<ul>
<li><code>DM.iCantidad Cantidad</code>
<ul>
<li><a href="/IndicadoresMatriz/docs/elements/tables#almdetmovimientos">AlmDetMovimientos</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Datos base de <a href="/IndicadoresMatriz/docs/elements/view#consumomaterialhistorico">Compras.ConsumoMaterialHistorico</a></li>
</ul>
</li>
<li>
<p><strong>Descripción</strong>: Porcentaje que representa el consumo del material respecto al total</p>
</li>
<li>
<p><strong>Valores esperados</strong>: Decimales entre 0 y 1</p>
</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>La diferencia entre Costo Y ConsumoAnalisis es la suma, uno es la suma de todos los valores, mientras que el otro es el valor como tal</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="matrizcostounitario">MatrizCostoUnitario<a href="#matrizcostounitario" class="hash-link" aria-label="Direct link to MatrizCostoUnitario" title="Direct link to MatrizCostoUnitario">​</a></h3>
<ul>
<li>
<p><strong>Fórmula</strong>: <a href="/IndicadoresMatriz/docs/legible_output_data#costo-por-unidad"><code>IIF(SUM(CostoTotal) = 0, 0, SUM(CostoTotal)/SUM(InventarioHoy))</code></a></p>
</li>
<li>
<p><strong>Origen</strong>:</p>
<div data-toggle-list="true"></div>
<ul>
<li><a href="/IndicadoresMatriz/docs/elements/with#_wtconsultabase">_WTCONSULTABASE</a> as cb<!-- -->
<ul>
<li><code>( IIF(SUM(CostoTotal) = 0 ,0 , SUM(CostoTotal) / SUM(InventarioHoy))) AS CostoUnitario</code>
<ul>
<li><strong>CostoTotal</strong>: <a href="/IndicadoresMatriz/docs/elements/with">_Inventario</a>&gt;<code>SUM(m.istock * m.CostoProm) CostoTotal</code>
<ul>
<li><strong>m</strong>: <a href="/IndicadoresMatriz/docs/elements/tables#almmatubicaciones">AlmMatUbicaciones</a> (istock, CostoProm)</li>
</ul>
</li>
<li><strong>InventarioHoy</strong>: <code>SUM(m.istock) InventarioHoy</code>
<ul>
<li><strong>m</strong>: <a href="/IndicadoresMatriz/docs/elements/tables#almmatubicaciones">AlmMatUbicaciones</a> (istock)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Calculado a partir de <code>MatrizCostoTotal</code> y <code>MatrizInventarioHoy</code></li>
<li>Datos base de <a href="/IndicadoresMatriz/docs/elements/tables#almmatubicaciones">AlmMatUbicaciones</a></li>
</ul>
</li>
<li>
<p><strong>Descripción</strong>: Costo promedio por unidad de material</p>
</li>
<li>
<p><strong>Valores esperados</strong>: Números reales ≥ 0</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="matrizclasificacion">MatrizClasificacion<a href="#matrizclasificacion" class="hash-link" aria-label="Direct link to MatrizClasificacion" title="Direct link to MatrizClasificacion">​</a></h3>
<ul>
<li>
<p><strong>Origen</strong>:</p>
<div data-toggle-list="true"></div>
<ul>
<li>
<p><a href="/IndicadoresMatriz/docs/elements/with#_wtconsultabase">_WTCONSULTABASE</a> as cb &gt;</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  ISNULL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TOP</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> CondicionesAbcClasificacion</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Compras</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">CondicionesAbc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">oc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Contribucion </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> oc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Contribucion</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token operator" style="color:#393A34">BETWEEN</span><span class="token plain"> CondicionesAbcMinimo </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> CondicionesAbcMaximo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token operator" style="color:#393A34">OR</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">PromedioConsumo </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ISNULL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CPM</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DesvEstandar</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> PromedioConsumo</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> CondicionesAbcValor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> CondicionesAbcId </span><span class="token keyword" style="color:#00009f">ASC</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&#x27;SIN ROTACIÓN&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> Clasificacion</span><br></span></code></pre></div></div>
<ul>
<li><strong>oc</strong>: <a href="/IndicadoresMatriz/docs/elements/with.md/_OperacionesContribucion">_OperacionesContribucion</a> &gt;<!-- -->
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CONVERT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">NUMERIC</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">18</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ISNULL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">costo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ISNULL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">costo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ConsumoAnalisis </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> ISNULL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">costo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> Contribucion</span><br></span></code></pre></div></div>
<ul>
<li><strong>costo</strong>: <a href="/IndicadoresMatriz/docs/elements/with#_inventario">_Inventario</a> &gt; <code>(SELECT valor FROM WT_ValorTotal WHERE g.aportenacional = aportenacional) costo</code>
<ul>
<li><strong>valor</strong>: <a href="/IndicadoresMatriz/docs/elements/with#wt_valortotal">WT_ValorTotal</a> &gt;<code>SUM(ISNULL(cmh.Total, 0)) AS valor</code>
<ul>
<li><strong>cmh</strong>: Vista <a href="/IndicadoresMatriz/docs/elements/view#consumomaterialhistorico">Compras.ConsumoMaterialHistorico</a> &gt; <code>SUM(Cantidad)Total</code>
<ul>
<li><strong>cantidad</strong>: vista <a href="/IndicadoresMatriz/docs/elements/view#entradasysalidas">Compras.EntradasySalidas</a> &gt; <code>DM.iCantidad Cantidad</code>
<ul>
<li><a href="/IndicadoresMatriz/docs/elements/tables#almdetmovimientos">AlmDetMovimientos</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>g</strong>: <a href="/IndicadoresMatriz/docs/elements/tables#genmateriales">genMateriales</a> (campo <code>MaterialImportado</code>)</li>
</ul>
</li>
<li><strong>ConsumoAnalisis</strong>: <a href="/IndicadoresMatriz/docs/elements/with#_inventario">_Inventario</a>&gt; <code>ISNULL(cmh.Total, 0) AS ConsumoAnalisis</code></li>
</ul>
</li>
<li><strong>CondicionesAbcMinimo</strong>: <a href="/IndicadoresMatriz/docs/elements/tables#compras.condicionesabc">Compras.CondicionesAbc</a></li>
<li><strong>CondicionesAbcMaximo</strong>: <a href="/IndicadoresMatriz/docs/elements/tables#compras.condicionesabc">Compras.CondicionesAbc</a></li>
<li><strong>PromedioConsumo</strong>: <a href="/IndicadoresMatriz/docs/elements/view#consumopromedioMaterial">Compras.ConsumoPromedioMaterial</a> &gt; <code>(SUM(a.Total)/(SELECT convert(int,Valor) FROM GenParametrizacion WHERE Parametro = &#x27;RangoMesConsumo&#x27;))PromedioConsumo</code>
<ul>
<li><strong>a</strong>: <code>sum(MovimientoMensual.Total) Total</code> &gt; <code>SUM(Cantidad) Total</code>
<ul>
<li><strong>cantidad</strong>: vista <a href="/IndicadoresMatriz/docs/elements/view#entradasysalidas">Compras.EntradasySalidas</a> &gt; <code>DM.iCantidad Cantidad</code>
<ul>
<li><a href="/IndicadoresMatriz/docs/elements/tables#almdetmovimientos">AlmDetMovimientos</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>CPM</strong>: <a href="/IndicadoresMatriz/docs/elements/view#consumopromedioMaterial">Compras.ConsumoPromedioMaterial</a>
<ul>
<li><strong>DesvEstandar</strong>: <code>stdev(a.Total)DesvEstandar</code>
<ul>
<li><strong>a</strong>: <code>sum(MovimientoMensual.Total) Total</code> &gt; <code>SUM(Cantidad) Total</code>
<ul>
<li><strong>cantidad</strong>: vista <a href="/IndicadoresMatriz/docs/elements/view#entradasysalidas">Compras.EntradasySalidas</a> &gt; <code>DM.iCantidad Cantidad</code>
<ul>
<li><a href="/IndicadoresMatriz/docs/elements/tables#almdetmovimientos">AlmDetMovimientos</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>CondicionesAbcValor</strong>: <a href="/IndicadoresMatriz/docs/elements/tables#compras.condicionesabc">Compras.CondicionesAbc</a></li>
</ul>
</li>
<li>
<p>Tabla <a href="/IndicadoresMatriz/docs/elements/tables#comprascondicionesabc">Compras.CondicionesAbc</a></p>
</li>
<li>
<p>Asignado según rangos de contribución</p>
</li>
</ul>
</li>
<li>
<p><strong>Descripción</strong>: Clasificación ABC del material basada en su rotación</p>
</li>
<li>
<p><strong>Valores esperados</strong>:</p>
<ul>
<li>&#x27;A&#x27; (Alta rotación)</li>
<li>&#x27;B&#x27; (Media rotación)</li>
<li>&#x27;C&#x27; (Baja rotación)</li>
<li>&#x27;SIN ROTACIÓN&#x27;</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="matriznomproveedor">MatrizNomProveedor<a href="#matriznomproveedor" class="hash-link" aria-label="Direct link to MatrizNomProveedor" title="Direct link to MatrizNomProveedor">​</a></h3>
<ul>
<li>
<p><strong>Fromula</strong>:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TOP</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> gp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">NomProveedor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> AlmSolicitudes als</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token keyword" style="color:#00009f">INNER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> GenProveedores gp </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> als</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">IdProveedor </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> gp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">IdProveedor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token keyword" style="color:#00009f">INNER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> AlmDetSolicitudes ald </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> als</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">IdSolicitud </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ald</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">IdSolicitud</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> ald</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">IdMaterial </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> _Inventario</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">IdMaterial</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> als</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">NoOC </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">IN</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">61</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">89</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">111</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">79</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> als</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">NoOC </span><span class="token keyword" style="color:#00009f">DESC</span><br></span></code></pre></div></div>
</li>
<li>
<p><strong>Origen</strong>:</p>
<div data-toggle-list="true"></div>
<ul>
<li><a href="/IndicadoresMatriz/docs/elements/with#_wtconsultabase">_WTCONSULTABASE</a> &gt;<!-- -->
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TOP</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> gp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">NomProveedor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> AlmSolicitudes </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> als</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">INNER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> GenProveedores </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> gp </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> als</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">IdProveedor </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> gp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">IdProveedor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">INNER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> AlmDetSolicitudes </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> ald </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> als</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">IdSolicitud </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ald</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">IdSolicitud</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> ald</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">IdMaterial </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> _Inventario</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">IdMaterial</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> NomProveedor</span><br></span></code></pre></div></div>
</li>
<li>Consulta a <a href="/IndicadoresMatriz/docs/elements/tables#almsolicitudes">AlmSolicitudes</a> y <a href="/IndicadoresMatriz/docs/elements/tables#genproveedores">GenProveedores</a></li>
<li>Última OC por material</li>
</ul>
</li>
<li>
<p><strong>Descripción</strong>: Nombre del proveedor principal del material</p>
</li>
<li>
<p><strong>Valores esperados</strong>:</p>
<ul>
<li>Nombres de proveedores (ej. &quot;Distribuidora Andina S.A.&quot;)</li>
<li>&#x27;N/A&#x27; para materiales sin historial de compras</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="matrizleadtime">MatrizLeadTime<a href="#matrizleadtime" class="hash-link" aria-label="Direct link to MatrizLeadTime" title="Direct link to MatrizLeadTime">​</a></h3>
<ul>
<li>
<p><strong>Origen</strong>:</p>
<div data-toggle-list="true"></div>
<ul>
<li>Campo <code>LeadTime</code> de <a href="/IndicadoresMatriz/docs/elements/tables#genmateriales">genMateriales</a></li>
</ul>
</li>
<li>
<p><strong>Descripción</strong>: Tiempo estimado de entrega desde la orden hasta la recepción</p>
</li>
<li>
<p><strong>Valores esperados</strong>: Enteros ≥ 0 (días hábiles)</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="matrizpromedioconsumo">MatrizPromedioConsumo<a href="#matrizpromedioconsumo" class="hash-link" aria-label="Direct link to MatrizPromedioConsumo" title="Direct link to MatrizPromedioConsumo">​</a></h3>
<ul>
<li>
<p><strong>Origen</strong>:</p>
<div data-toggle-list="true"></div>
<ul>
<li><a href="/IndicadoresMatriz/docs/elements/with#_wtconsultabase">_WTCONSULTABASE</a> &gt; <code>ISNULL(cpm.PromedioConsumo, 0)</code>
<ul>
<li><strong>CPM</strong>: <a href="/IndicadoresMatriz/docs/elements/view#consumopromedioMaterial">Compras.ConsumoPromedioMaterial</a> &gt;<!-- -->
<ul>
<li><strong>PromedioConsumo</strong>: <a href="/IndicadoresMatriz/docs/elements/view#consumopromedioMaterial">Compras.ConsumoPromedioMaterial</a> &gt; <code>(SUM(a.Total)/(SELECT convert(int,Valor) FROM GenParametrizacion WHERE Parametro = &#x27;RangoMesConsumo&#x27;))PromedioConsumo</code>
<ul>
<li><strong>a</strong>: <code>sum(MovimientoMensual.Total) Total</code> &gt; <code>SUM(Cantidad) Total</code>
<ul>
<li><strong>cantidad</strong>: vista <a href="/IndicadoresMatriz/docs/elements/view#entradasysalidas">Compras.EntradasySalidas</a> &gt; <code>DM.iCantidad Cantidad</code>
<ul>
<li><a href="/IndicadoresMatriz/docs/elements/tables#almdetmovimientos">AlmDetMovimientos</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Vista [Compras].<a href="/IndicadoresMatriz/docs/elements/view#consumopromediomaterial">ConsumoPromedioMaterial</a></li>
<li>Datos calculados desde <a href="/IndicadoresMatriz/docs/elements/tables#almdetmovimientos">AlmDetMovimientos</a></li>
</ul>
</li>
<li>
<p><strong>Descripción</strong>: Consumo diario promedio en el período analizado</p>
</li>
<li>
<p><strong>Valores esperados</strong>: Números reales ≥ 0</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="matrizdesvestandar">MatrizDesvEstandar<a href="#matrizdesvestandar" class="hash-link" aria-label="Direct link to MatrizDesvEstandar" title="Direct link to MatrizDesvEstandar">​</a></h3>
<ul>
<li>
<p><strong>Formula</strong>: <a href="/IndicadoresMatriz/docs/legible_output_data#variabilidad-del-uso">Variabilidad del Uso</a></p>
</li>
<li>
<p><strong>Origen</strong>:</p>
<div data-toggle-list="true"></div>
<ul>
<li>
<p><a href="/IndicadoresMatriz/docs/elements/with#_wtconsultabase">_WTCONSULTABASE</a> &gt; <code>ISNULL(cpm.DesvEstandar, 0) DesvEstandar</code></p>
</li>
<li>
<p><strong>CPM</strong>: <a href="/IndicadoresMatriz/docs/elements/view#consumopromedioMaterial">Compras.ConsumoPromedioMaterial</a></p>
<ul>
<li><strong>DesvEstandar</strong>: <code>stdev(a.Total) DesvEstandar</code>
<ul>
<li><strong>a</strong>: <code>sum(MovimientoMensual.Total) Total</code> &gt; <code>SUM(Cantidad) Total</code>
<ul>
<li><strong>cantidad</strong>: vista <a href="/IndicadoresMatriz/docs/elements/view#entradasysalidas">Compras.EntradasySalidas</a> &gt; <code>DM.iCantidad Cantidad</code>
<ul>
<li><a href="/IndicadoresMatriz/docs/elements/tables#almdetmovimientos">AlmDetMovimientos</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Vista [Compras].<a href="/IndicadoresMatriz/docs/elements/view#consumopromediomaterial">ConsumoPromedioMaterial</a></p>
</li>
</ul>
</li>
<li>
<p><strong>Descripción</strong>: Variabilidad del consumo del material</p>
</li>
<li>
<p><strong>Valores esperados</strong>: Números reales ≥ 0</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="matrizsafetystock">MatrizSafetyStock<a href="#matrizsafetystock" class="hash-link" aria-label="Direct link to MatrizSafetyStock" title="Direct link to MatrizSafetyStock">​</a></h3>
<ul>
<li><strong>Fórmula</strong>: <a href="/IndicadoresMatriz/docs/legible_output_data#stock-de-seguridad"><code>ROUND((cpm.MediaDia - @ComprasSafetyStock), 0)</code></a></li>
<li><strong>Origen</strong>:<!-- -->
<div data-toggle-list="true"></div>
<ul>
<li><a href="/IndicadoresMatriz/docs/elements/with#_wtconsultabase">_WTCONSULTABASE</a> &gt; <code>ISNULL(ROUND((cpm.MediaDia * @ComprasSafetyStock) ,0) ,0) SafetyStock</code>
<ul>
<li><strong>CPM</strong>: <a href="/IndicadoresMatriz/docs/elements/view#consumopromedioMaterial">Compras.ConsumoPromedioMaterial</a>
<ul>
<li><strong>MediaDia</strong>:<!-- -->
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">AVG</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Total</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">CONVERT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">INT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> VALOR </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> GenParametrizacion </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> PARAMETRO </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;ComprasDiasMediaxDia&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> MediaDia</span><br></span></code></pre></div></div>
<ul>
<li><strong>a</strong>: <code>sum(MovimientoMensual.Total) Total</code> &gt; <code>SUM(Cantidad) Total</code>
<ul>
<li><strong>cantidad</strong>: vista <a href="/IndicadoresMatriz/docs/elements/view#entradasysalidas">Compras.EntradasySalidas</a> &gt; <code>DM.iCantidad Cantidad</code>
<ul>
<li><a href="/IndicadoresMatriz/docs/elements/tables#almdetmovimientos">AlmDetMovimientos</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>Parámetros</strong>:<!-- -->
<ul>
<li><code>@ComprasSafetyStock</code> de <a href="/IndicadoresMatriz/docs/elements/tables#genparametrizacion">GenParametrizacion</a></li>
</ul>
</li>
<li><strong>Descripción</strong>: Stock mínimo para cubrir fluctuaciones de demanda</li>
<li><strong>Valores esperados</strong>: Enteros ≥ 0</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="matrizreorderpoint">MatrizReorderPoint<a href="#matrizreorderpoint" class="hash-link" aria-label="Direct link to MatrizReorderPoint" title="Direct link to MatrizReorderPoint">​</a></h3>
<ul>
<li>
<p><strong>Fórmula</strong>: <a href="/IndicadoresMatriz/docs/legible_output_data#punto-de-reorden"><code>((cpm.MediaDia * LeadTime) + cpm.DesvEstandar + SafetyStock)</code></a></p>
</li>
<li>
<p><strong>Origen</strong>:</p>
<div data-toggle-list="true"></div>
<ul>
<li><a href="/IndicadoresMatriz/docs/elements/with#_wtconsultabase">_WTCONSULTABASE</a> &gt;<!-- -->
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    ISNULL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            cpm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">MediaDia </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> ISNULL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">LeadTime</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> genMateriales</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> IdMaterial </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> _Inventario</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">IdMaterial</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> cpm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DesvEstandar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> ISNULL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">ROUND</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cpm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">MediaDia </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">@ComprasSafetyStock</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> ReorderPoint</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<ul>
<li><strong>CPM</strong>: <a href="/IndicadoresMatriz/docs/elements/view#consumopromedioMaterial">Compras.ConsumoPromedioMaterial</a>
<ul>
<li><strong>MediaDia</strong>:<!-- -->
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">AVG</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Total</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">CONVERT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">INT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> VALOR </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> GenParametrizacion </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> PARAMETRO </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;ComprasDiasMediaxDia&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> MediaDia</span><br></span></code></pre></div></div>
<ul>
<li><strong>a</strong>: <code>sum(MovimientoMensual.Total) Total</code> &gt; <code>SUM(Cantidad) Total</code>
<ul>
<li><strong>cantidad</strong>: vista <a href="/IndicadoresMatriz/docs/elements/view#entradasysalidas">Compras.EntradasySalidas</a> &gt; <code>DM.iCantidad Cantidad</code>
<ul>
<li><a href="/IndicadoresMatriz/docs/elements/tables#almdetmovimientos">AlmDetMovimientos</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>DesvEstandar</strong>: <code>stdev(a.Total) DesvEstandar</code>
<ul>
<li><strong>a</strong>: <code>sum(MovimientoMensual.Total) Total</code> &gt; <code>SUM(Cantidad) Total</code>
<ul>
<li><strong>cantidad</strong>: vista <a href="/IndicadoresMatriz/docs/elements/view#entradasysalidas">Compras.EntradasySalidas</a> &gt; <code>DM.iCantidad Cantidad</code>
<ul>
<li><a href="/IndicadoresMatriz/docs/elements/tables#almdetmovimientos">AlmDetMovimientos</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Componentes</strong>:</p>
<ul>
<li><code>MediaDia</code>: De <a href="/IndicadoresMatriz/docs/elements/view#consumopromediomaterial">Compras.ConsumoPromedioMaterial</a></li>
<li><code>LeadTime</code>: De <a href="/IndicadoresMatriz/docs/elements/tables#genmateriales">genMateriales</a></li>
</ul>
</li>
<li>
<p><strong>Descripción</strong>: Punto para disparar una nueva orden de compra</p>
</li>
<li>
<p><strong>Valores esperados</strong>: Enteros ≥ 0</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="matrizcostodeordenar">MatrizCostoDeOrdenar<a href="#matrizcostodeordenar" class="hash-link" aria-label="Direct link to MatrizCostoDeOrdenar" title="Direct link to MatrizCostoDeOrdenar">​</a></h3>
<ul>
<li>
<p><strong>Fórmula</strong>: <code> WTMANODEOBRA.ValorManoDeObra/( COUNT(*) FROM _Inventario)</code></p>
</li>
<li>
<p><strong>Origen</strong>:</p>
<div data-toggle-list="true"></div>
<ul>
<li><a href="/IndicadoresMatriz/docs/elements/with#_wtconsultabase">_WTCONSULTABASE</a> &gt;<!-- -->
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_Inventario</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AporteNacional </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;SI&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> pc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PrecioDeCompra </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">@PorcentajeCostoOrdenar</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> WTMANODEOBRA</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ValorManoDeObra </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> WTMANODEOBRA</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">/</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">COUNT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> _Inventario</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> WTMANODEOBRA</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ValorManoDeObra </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> WTMANODEOBRA</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">/</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">COUNT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> _Inventario</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">CostoDeOrdenar </span><br></span></code></pre></div></div>
<ul>
<li><strong>PC</strong>: <a href="/IndicadoresMatriz/docs/elements/with#_wtpreciodecompra">_WTPRECIODECOMPRA</a>
<ul>
<li><strong>PrecioDeCompra</strong>:<!-- -->
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      PrecioDolarMaterialesValor </span><span class="token operator" style="color:#393A34">IS</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- Si PrecioDolarMaterialesValor ES NULL:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoTotal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoTotal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">InventarioHoy</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">-- Si el promedio ES 0 → usar el costo de respaldo de la unidad (ue.Costo)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Costo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">-- Si el promedio NO es 0 → usar el promedio de costo calculado</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoTotal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoTotal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">InventarioHoy</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- Si PrecioDolarMaterialesValor NO ES NULL:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- Se asume que es un valor en dólares y se convierte a pesos (multiplicando por 3000)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">PrecioDolarMaterialesValor </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">--!!! ESTA QUEMADO</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">-- ELSE (en caso de que todo lo anterior falle):</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">ELSE</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- Repetimos la lógica del promedio de costo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoTotal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoTotal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">InventarioHoy</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- Si el promedio ES 0 → usar costo de respaldo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Costo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- Si NO es 0 → usar promedio</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoTotal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoTotal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">InventarioHoy</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">-- Valor por defecto final, si nada se cumple o falla el cálculo: 0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;PrecioDeCompra&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<ul>
<li><strong>PrecioDolarMaterialesValor</strong>: <a href="/IndicadoresMatriz/docs/elements/with#_wtpreciodolar">_WTPRECIODOLAR</a> &gt; <code>MAX(pdm.PrecioDolarMaterialesValor)</code>
<ul>
<li><strong>pdm</strong>: <code>Compras.PrecioDolarMateriales pdm</code></li>
</ul>
</li>
<li><strong>CostoTotal</strong>: <a href="/IndicadoresMatriz/docs/elements/with">_Inventario</a>&gt;<code>SUM(m.istock * m.CostoProm) CostoTotal</code>
<ul>
<li><strong>m</strong>: <a href="/IndicadoresMatriz/docs/elements/tables#almmatubicaciones">AlmMatUbicaciones</a> (istock, CostoProm)</li>
</ul>
</li>
<li><strong>InventarioHoy</strong>: <code>SUM(m.istock) InventarioHoy</code>
<ul>
<li><strong>m</strong>: <a href="/IndicadoresMatriz/docs/elements/tables#almmatubicaciones">AlmMatUbicaciones</a> (istock)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>WTMANODEOBRA</strong>:<!-- -->
<ul>
<li><strong>ValorManoDeObra</strong> <code>SELECT SUM(Valor) ValorManoDeObra</code>
<ul>
<li><strong>valor</strong>:<!-- -->
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">@CostoCoord</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">@ComprasDiasMediaxDia</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> Valor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">UNION</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">@CostoCompras</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">@ComprasDiasMediaxDia</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> Valor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">UNION</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">@CostoAlmacen</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">@ComprasDiasMediaxDia</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> Valor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">-- valor es la suma de estas diviciones</span><br></span></code></pre></div></div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Parámetros de <a href="/IndicadoresMatriz/docs/elements/tables#genparametrizacion">GenParametrizacion</a></li>
</ul>
</li>
<li>
<p><strong>Descripción</strong>: Costo administrativo de realizar un pedido</p>
</li>
<li>
<p><strong>Valores esperados</strong>: Números reales ≥ 0</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="matrizcostodeinventariound">MatrizCostoDeInventarioUnd<a href="#matrizcostodeinventariound" class="hash-link" aria-label="Direct link to MatrizCostoDeInventarioUnd" title="Direct link to MatrizCostoDeInventarioUnd">​</a></h3>
<ul>
<li><strong>Fórmula</strong>: <code>PrecioDeCompra - @RentaMesCDT</code></li>
<li><strong>origen</strong>: <a href="/IndicadoresMatriz/docs/elements/with#_wtconsultabase">_WTCONSULTABASE</a> &gt; <code>(pc.PrecioDeCompra * @RentaMesCDT) CostoDeInventarioUnd</code>
<div data-toggle-list="true"></div>
<ul>
<li><strong>PC</strong>:<!-- -->
<ul>
<li><a href="/IndicadoresMatriz/docs/elements/with#_wtpreciodecompra">_WTPRECIODECOMPRA</a>
<ul>
<li><strong>PrecioDeCompra</strong>:<!-- -->
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      PrecioDolarMaterialesValor </span><span class="token operator" style="color:#393A34">IS</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- Si PrecioDolarMaterialesValor ES NULL:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoTotal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoTotal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">InventarioHoy</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">-- Si el promedio ES 0 → usar el costo de respaldo de la unidad (ue.Costo)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Costo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">-- Si el promedio NO es 0 → usar el promedio de costo calculado</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoTotal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoTotal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">InventarioHoy</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- Si PrecioDolarMaterialesValor NO ES NULL:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- Se asume que es un valor en dólares y se convierte a pesos (multiplicando por 3000)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">PrecioDolarMaterialesValor </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">--!!! ESTA QUEMADO</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">-- ELSE (en caso de que todo lo anterior falle):</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">ELSE</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- Repetimos la lógica del promedio de costo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoTotal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoTotal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">InventarioHoy</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- Si el promedio ES 0 → usar costo de respaldo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Costo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- Si NO es 0 → usar promedio</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoTotal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoTotal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">InventarioHoy</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">-- Valor por defecto final, si nada se cumple o falla el cálculo: 0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;PrecioDeCompra&#x27;</span><br></span></code></pre></div></div>
<ul>
<li><strong>PrecioDolarMaterialesValor</strong>: <a href="/IndicadoresMatriz/docs/elements/with#_wtpreciodolar">_WTPRECIODOLAR</a> &gt; <code>MAX(pdm.PrecioDolarMaterialesValor)</code>
<ul>
<li><strong>pdm</strong>: <code>Compras.PrecioDolarMateriales pdm</code></li>
</ul>
</li>
<li><strong>CostoTotal</strong>: <a href="/IndicadoresMatriz/docs/elements/with">_Inventario</a>&gt;<code>SUM(m.istock * m.CostoProm) CostoTotal</code>
<ul>
<li><strong>m</strong>: <a href="/IndicadoresMatriz/docs/elements/tables#almmatubicaciones">AlmMatUbicaciones</a> (istock, CostoProm)</li>
</ul>
</li>
<li><strong>InventarioHoy</strong>: <code>SUM(m.istock) InventarioHoy</code>
<ul>
<li><strong>m</strong>: <a href="/IndicadoresMatriz/docs/elements/tables#almmatubicaciones">AlmMatUbicaciones</a> (istock)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>Componentes</strong>:<!-- -->
<ul>
<li><code>PrecioDeCompra</code>: De CTE <a href="/IndicadoresMatriz/docs/elements/with#_wtpreciodecompra">_WTPRECIODECOMPRA</a></li>
<li><code>@RentaMesCDT</code>: De <a href="/IndicadoresMatriz/docs/elements/tables#genparametrizacion">GenParametrizacion</a></li>
</ul>
</li>
<li><strong>Descripción</strong>: Costo de oportunidad por mantener inventario</li>
<li><strong>Valores esperados</strong>: Números reales ≥ 0</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="matrizpreciodecompra">MatrizPrecioDeCompra<a href="#matrizpreciodecompra" class="hash-link" aria-label="Direct link to MatrizPrecioDeCompra" title="Direct link to MatrizPrecioDeCompra">​</a></h3>
<ul>
<li>
<p><strong>Origen</strong>:</p>
<div data-toggle-list="true"></div>
<ul>
<li>
<p><a href="/IndicadoresMatriz/docs/elements/with#_wtpreciodecompra">_WTPRECIODECOMPRA</a> AS pdc</p>
<ul>
<li><strong>PrecioDeCompra</strong>:<!-- -->
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      PrecioDolarMaterialesValor </span><span class="token operator" style="color:#393A34">IS</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- Si PrecioDolarMaterialesValor ES NULL:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoTotal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoTotal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">InventarioHoy</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">-- Si el promedio ES 0 → usar el costo de respaldo de la unidad (ue.Costo)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Costo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">-- Si el promedio NO es 0 → usar el promedio de costo calculado</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoTotal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoTotal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">InventarioHoy</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- Si PrecioDolarMaterialesValor NO ES NULL:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- Se asume que es un valor en dólares y se convierte a pesos (multiplicando por 3000)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">PrecioDolarMaterialesValor </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">--!!! ESTA QUEMADO</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">-- ELSE (en caso de que todo lo anterior falle):</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">ELSE</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- Repetimos la lógica del promedio de costo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoTotal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoTotal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">InventarioHoy</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- Si el promedio ES 0 → usar costo de respaldo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Costo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- Si NO es 0 → usar promedio</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoTotal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoTotal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">InventarioHoy</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">-- Valor por defecto final, si nada se cumple o falla el cálculo: 0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;PrecioDeCompra&#x27;</span><br></span></code></pre></div></div>
<ul>
<li><strong>PrecioDolarMaterialesValor</strong>: <a href="/IndicadoresMatriz/docs/elements/with#_wtpreciodolar">_WTPRECIODOLAR</a> &gt; <code>MAX(pdm.PrecioDolarMaterialesValor)</code>
<ul>
<li><strong>pdm</strong>: <code>Compras.PrecioDolarMateriales pdm</code></li>
</ul>
</li>
<li><strong>CostoTotal</strong>: <a href="/IndicadoresMatriz/docs/elements/with">_Inventario</a>&gt;<code>SUM(m.istock * m.CostoProm) CostoTotal</code>
<ul>
<li><strong>m</strong>: <a href="/IndicadoresMatriz/docs/elements/tables#almmatubicaciones">AlmMatUbicaciones</a> (istock, CostoProm)</li>
</ul>
</li>
<li><strong>InventarioHoy</strong>: <code>SUM(m.istock) InventarioHoy</code>
<ul>
<li><strong>m</strong>: <a href="/IndicadoresMatriz/docs/elements/tables#almmatubicaciones">AlmMatUbicaciones</a> (istock)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>CTE <a href="/IndicadoresMatriz/docs/elements/with#_wtpreciodecompra">_WTPRECIODECOMPRA</a></p>
</li>
<li>
<p>Datos de:</p>
<ul>
<li><a href="/IndicadoresMatriz/docs/elements/tables#genmateriales">genMateriales</a></li>
<li><a href="/IndicadoresMatriz/docs/elements/tables#comprasliquidacionimportaciones">Compras.LiquidacionImportaciones</a></li>
<li><a href="/IndicadoresMatriz/docs/elements/tables#compraspreciodolarmateriales">Compras.PrecioDolarMateriales</a></li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Descripción</strong>: Último precio unitario pagado por el material</p>
</li>
<li>
<p><strong>Valores esperados</strong>: Números reales &gt; 0</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="matrizeoq">MatrizEOQ<a href="#matrizeoq" class="hash-link" aria-label="Direct link to MatrizEOQ" title="Direct link to MatrizEOQ">​</a></h3>
<ul>
<li><strong>Fórmula</strong>: <a href="/IndicadoresMatriz/docs/legible_output_data#cantidad-ideal-de-compra-eoq">Formula</a>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoDeInventarioUnd </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">ROUND</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sqrt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> PromedioConsumo </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> CostoDeOrdenar</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">CostoDeInventarioUnd</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
</li>
<li><strong>Origen</strong>:<!-- -->
<div data-toggle-list="true"></div>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoDeInventarioUnd </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function" style="color:#d73a49">ROUND</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sqrt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> cb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PromedioConsumo </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> cb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">CostoDeOrdenar</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">CostoDeInventarioUnd</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> EOQ</span><br></span></code></pre></div></div>
<ul>
<li><strong>cb</strong> : <a href="/IndicadoresMatriz/docs/elements/with#_wtconsultabase">_WTCONSULTABASE</a>
<ul>
<li><strong>PromedioConsumo</strong>: <code>ISNULL(cpm.PromedioConsumo, 0) PromedioConsumo</code>
<ul>
<li><strong>CPM</strong>: <a href="/IndicadoresMatriz/docs/elements/view#consumopromedioMaterial">Compras.ConsumoPromedioMaterial</a> &gt;<!-- -->
<ul>
<li><strong>PromedioConsumo</strong>: <a href="/IndicadoresMatriz/docs/elements/view#consumopromedioMaterial">Compras.ConsumoPromedioMaterial</a> &gt; <code>(SUM(a.Total)/(SELECT convert(int,Valor) FROM GenParametrizacion WHERE Parametro = &#x27;RangoMesConsumo&#x27;))PromedioConsumo</code>
<ul>
<li><strong>a</strong>: <code>sum(MovimientoMensual.Total) Total</code> &gt; <code>SUM(Cantidad) Total</code>
<ul>
<li><strong>cantidad</strong>: vista <a href="/IndicadoresMatriz/docs/elements/view#entradasysalidas">Compras.EntradasySalidas</a> &gt; <code>DM.iCantidad Cantidad</code>
<ul>
<li><a href="/IndicadoresMatriz/docs/elements/tables#almdetmovimientos">AlmDetMovimientos</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>CostoDeOrdenar</strong>:<!-- -->
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_Inventario</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AporteNacional </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;SI&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> pc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PrecioDeCompra </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">@PorcentajeCostoOrdenar</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> WTMANODEOBRA</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ValorManoDeObra </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> WTMANODEOBRA</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">/</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">COUNT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> _Inventario</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> WTMANODEOBRA</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ValorManoDeObra </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> WTMANODEOBRA</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">/</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">COUNT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> _Inventario</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> CostoDeOrdenar </span><br></span></code></pre></div></div>
<ul>
<li><strong>PC</strong>: <a href="/IndicadoresMatriz/docs/elements/with#_wtpreciodecompra">_WTPRECIODECOMPRA</a>
<ul>
<li><strong>PrecioDeCompra</strong>:<!-- -->
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      PrecioDolarMaterialesValor </span><span class="token operator" style="color:#393A34">IS</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- Si PrecioDolarMaterialesValor ES NULL:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoTotal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoTotal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">InventarioHoy</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">-- Si el promedio ES 0 → usar el costo de respaldo de la unidad (ue.Costo)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Costo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">-- Si el promedio NO es 0 → usar el promedio de costo calculado</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoTotal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoTotal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">InventarioHoy</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- Si PrecioDolarMaterialesValor NO ES NULL:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- Se asume que es un valor en dólares y se convierte a pesos (multiplicando por 3000)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">PrecioDolarMaterialesValor </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">--!!! ESTA QUEMADO</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">-- ELSE (en caso de que todo lo anterior falle):</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">ELSE</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- Repetimos la lógica del promedio de costo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoTotal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoTotal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">InventarioHoy</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- Si el promedio ES 0 → usar costo de respaldo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Costo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- Si NO es 0 → usar promedio</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoTotal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoTotal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">InventarioHoy</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">-- Valor por defecto final, si nada se cumple o falla el cálculo: 0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;PrecioDeCompra&#x27;</span><br></span></code></pre></div></div>
<ul>
<li><strong>PrecioDolarMaterialesValor</strong>: <a href="/IndicadoresMatriz/docs/elements/with#_wtpreciodolar">_WTPRECIODOLAR</a> &gt; <code>MAX(pdm.PrecioDolarMaterialesValor)</code>
<ul>
<li><strong>pdm</strong>: <code>Compras.PrecioDolarMateriales pdm</code></li>
</ul>
</li>
<li><strong>CostoTotal</strong>: <a href="/IndicadoresMatriz/docs/elements/with">_Inventario</a>&gt;<code>SUM(m.istock * m.CostoProm) CostoTotal</code>
<ul>
<li><strong>m</strong>: <a href="/IndicadoresMatriz/docs/elements/tables#almmatubicaciones">AlmMatUbicaciones</a> (istock, CostoProm)</li>
</ul>
</li>
<li><strong>InventarioHoy</strong>: <code>SUM(m.istock) InventarioHoy</code>
<ul>
<li><strong>m</strong>: <a href="/IndicadoresMatriz/docs/elements/tables#almmatubicaciones">AlmMatUbicaciones</a> (istock)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>WTMANODEOBRA</strong>:<!-- -->
<ul>
<li><strong>ValorManoDeObra</strong> <code>SELECT SUM(Valor) ValorManoDeObra</code>
<ul>
<li><strong>valor</strong>:<!-- -->
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">@CostoCoord</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">@ComprasDiasMediaxDia</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> Valor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">UNION</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">@CostoCompras</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">@ComprasDiasMediaxDia</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> Valor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">UNION</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">@CostoAlmacen</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">@ComprasDiasMediaxDia</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> Valor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">-- valor es la suma de estas diviciones</span><br></span></code></pre></div></div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>CostoDeInventarioUnd</strong>: <a href="/IndicadoresMatriz/docs/elements/with#_wtconsultabase">_WTCONSULTABASE</a> &gt; <code>(pc.PrecioDeCompra * @RentaMesCDT) CostoDeInventarioUnd</code>
<ul>
<li><strong>PC</strong>: <a href="/IndicadoresMatriz/docs/elements/with#_wtpreciodecompra">_WTPRECIODECOMPRA</a>
<ul>
<li><strong>PrecioDeCompra</strong>:<!-- -->
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      PrecioDolarMaterialesValor </span><span class="token operator" style="color:#393A34">IS</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- Si PrecioDolarMaterialesValor ES NULL:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoTotal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoTotal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">InventarioHoy</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">-- Si el promedio ES 0 → usar el costo de respaldo de la unidad (ue.Costo)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Costo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">-- Si el promedio NO es 0 → usar el promedio de costo calculado</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoTotal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoTotal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">InventarioHoy</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- Si PrecioDolarMaterialesValor NO ES NULL:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- Se asume que es un valor en dólares y se convierte a pesos (multiplicando por 3000)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">PrecioDolarMaterialesValor </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">--!!! ESTA QUEMADO</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">-- ELSE (en caso de que todo lo anterior falle):</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">ELSE</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- Repetimos la lógica del promedio de costo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoTotal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoTotal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">InventarioHoy</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- Si el promedio ES 0 → usar costo de respaldo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Costo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- Si NO es 0 → usar promedio</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoTotal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoTotal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">InventarioHoy</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">-- Valor por defecto final, si nada se cumple o falla el cálculo: 0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;PrecioDeCompra&#x27;</span><br></span></code></pre></div></div>
<ul>
<li><strong>PrecioDolarMaterialesValor</strong>: <a href="/IndicadoresMatriz/docs/elements/with#_wtpreciodolar">_WTPRECIODOLAR</a> &gt; <code>MAX(pdm.PrecioDolarMaterialesValor)</code>
<ul>
<li><strong>pdm</strong>: <code>Compras.PrecioDolarMateriales pdm</code></li>
</ul>
</li>
<li><strong>CostoTotal</strong>: <a href="/IndicadoresMatriz/docs/elements/with">_Inventario</a>&gt;<code>SUM(m.istock * m.CostoProm) CostoTotal</code>
<ul>
<li><strong>m</strong>: <a href="/IndicadoresMatriz/docs/elements/tables#almmatubicaciones">AlmMatUbicaciones</a> (istock, CostoProm)</li>
</ul>
</li>
<li><strong>InventarioHoy</strong>: <code>SUM(m.istock) InventarioHoy</code>
<ul>
<li><strong>m</strong>: <a href="/IndicadoresMatriz/docs/elements/tables#almmatubicaciones">AlmMatUbicaciones</a> (istock)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>Componentes</strong>:<!-- -->
<ul>
<li><code>PromedioConsumo</code>: De <a href="/IndicadoresMatriz/docs/elements/view#consumopromediomaterial">Compras.ConsumoPromedioMaterial</a></li>
<li><code>CostoDeOrdenar</code>: Calculado previamente</li>
</ul>
</li>
<li><strong>Descripción</strong>: Cantidad óptima de compra según modelo EOQ</li>
<li><strong>Valores esperados</strong>: Enteros ≥ 0
k</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="matrizorden">MatrizOrden<a href="#matrizorden" class="hash-link" aria-label="Direct link to MatrizOrden" title="Direct link to MatrizOrden">​</a></h3>
<ul>
<li>
<p><strong>Fórmula</strong>:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CantSugerida </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;NO ORDENAR&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">InventarioDePosicion </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> ReorderPoint</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;NO ORDENAR&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;ORDENAR&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
</li>
<li>
<p><strong>Origen</strong>:</p>
<div data-toggle-list="true"></div>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      cb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">InventarioHoy </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> ISNULL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Pendiente</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ISNULL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">bo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">CantidadBackOrder</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> ReorderPoint</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;NO ORDENAR&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;ORDENAR&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> Orden</span><br></span></code></pre></div></div>
<ul>
<li><strong>cb</strong>: <a href="/IndicadoresMatriz/docs/elements/with#_wtconsultabase">_WTCONSULTABASE</a>
<ul>
<li><strong>InventarioHoy</strong>: <code>SUM(m.istock) InventarioHoy</code>
<ul>
<li><strong>m</strong>: <a href="/IndicadoresMatriz/docs/elements/tables#almmatubicaciones">AlmMatUbicaciones</a> (istock)</li>
</ul>
</li>
</ul>
</li>
<li><strong>mp</strong>: <a href="/IndicadoresMatriz/docs/elements/with#_wtmaterialespendientes">_WTMATERIALESPENDIENTES</a>
<ul>
<li><strong>Pendiente</strong>: <code>SUM(DS.iCantidadSol - DS.iCantidadIng) [Pendiente]</code>
<ul>
<li><strong>DS</strong>: <a href="/IndicadoresMatriz/docs/elements/tables#almDetSolicitudes">almDetSolicitudes</a></li>
</ul>
</li>
</ul>
</li>
<li><strong>bo</strong>: <a href="/IndicadoresMatriz/docs/elements/with#_wtbackorder">_WTBACKORDER</a>
<ul>
<li><strong>CantidadBackOrder</strong>: <code>SUM(ISNULL(BackOrderSolicitudCantidadPendiente,0))CantidadBackOrder</code>
<ul>
<li><strong>BackOrderSolicitudCantidadPendiente</strong> : <a href="/IndicadoresMatriz/docs/elements/tables#compras.backordersolicitud">compras.BackOrderSolicitud</a></li>
</ul>
</li>
</ul>
</li>
<li><strong>ReorderPoint</strong>:<!-- -->
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">-- Cálculo del Reorder Point (punto de reorden)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ISNULL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">-- Media de consumo diario * Lead Time del material</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cpm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">MediaDia </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> ISNULL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">LeadTime</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> genMateriales</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> IdMaterial </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> _Inventario</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">IdMaterial</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">-- + Desviación estándar</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> cpm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DesvEstandar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">-- + Stock de seguridad</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> ISNULL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token function" style="color:#d73a49">ROUND</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cpm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">MediaDia </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">@ComprasSafetyStock</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> ReorderPoint</span><br></span></code></pre></div></div>
<ul>
<li><strong>CPM</strong>: <a href="/IndicadoresMatriz/docs/elements/view#consumopromedioMaterial">Compras.ConsumoPromedioMaterial</a>
<ul>
<li><strong>MediaDia</strong>:<!-- -->
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">AVG</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Total</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">CONVERT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">INT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> VALOR </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> GenParametrizacion </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> PARAMETRO </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;ComprasDiasMediaxDia&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> MediaDia</span><br></span></code></pre></div></div>
<ul>
<li><strong>a</strong>: <code>sum(MovimientoMensual.Total) Total</code> &gt; <code>SUM(Cantidad) Total</code>
<ul>
<li><strong>cantidad</strong>: vista <a href="/IndicadoresMatriz/docs/elements/view#entradasysalidas">Compras.EntradasySalidas</a> &gt; <code>DM.iCantidad Cantidad</code>
<ul>
<li><a href="/IndicadoresMatriz/docs/elements/tables#almdetmovimientos">AlmDetMovimientos</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>DesvEstandar</strong>: <code>stdev(a.Total) DesvEstandar</code>
<ul>
<li><strong>a</strong>: <code>sum(MovimientoMensual.Total) Total</code> &gt; <code>SUM(Cantidad) Total</code>
<ul>
<li><strong>cantidad</strong>: vista <a href="/IndicadoresMatriz/docs/elements/view#entradasysalidas">Compras.EntradasySalidas</a> &gt; <code>DM.iCantidad Cantidad</code>
<ul>
<li><a href="/IndicadoresMatriz/docs/elements/tables#almdetmovimientos">AlmDetMovimientos</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>_Inventario</strong>:<strong>IdMaterial</strong></li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Lógica</strong>:</p>
<ul>
<li>Compara <code>InventarioDePosicion</code> con <code>ReorderPoint</code></li>
<li>Considera <code>CantSugerida</code></li>
</ul>
</li>
<li>
<p><strong>Descripción</strong>: Recomendación de compra automatizada</p>
</li>
<li>
<p><strong>Valores esperados</strong>: &#x27;ORDENAR&#x27; / &#x27;NO ORDENAR&#x27;</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="matrizbackorder">MatrizBackOrder<a href="#matrizbackorder" class="hash-link" aria-label="Direct link to MatrizBackOrder" title="Direct link to MatrizBackOrder">​</a></h3>
<ul>
<li><strong>Origen</strong>:<!-- -->
<div data-toggle-list="true"></div>
<code>ISNULL(bo.CantidadBackOrder, 0) BackOrder</code>
<ul>
<li><strong>bo</strong>: <a href="/IndicadoresMatriz/docs/elements/with#_wtbackorder">_WTBACKORDER</a>
<ul>
<li><strong>CantidadBackOrder</strong>: <code>SUM(ISNULL(BackOrderSolicitudCantidadPendiente,0))CantidadBackOrder</code>
<ul>
<li><strong>BackOrderSolicitudCantidadPendiente</strong> : <a href="/IndicadoresMatriz/docs/elements/tables#compras.backordersolicitud">compras.BackOrderSolicitud</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>Descripción</strong>: Cantidad pendiente por entregar de órdenes confirmadas</li>
<li><strong>Valores esperados</strong>: Enteros ≥ 0</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="matriztransito">MatrizTransito<a href="#matriztransito" class="hash-link" aria-label="Direct link to MatrizTransito" title="Direct link to MatrizTransito">​</a></h3>
<ul>
<li>
<p><strong>Origen</strong>:</p>
<div data-toggle-list="true"></div>
<ul>
<li><code>ISNULL(mp.Pendiente,0) Transito</code>
<ul>
<li><strong>mp</strong>: <a href="/IndicadoresMatriz/docs/elements/with#_wtmaterialespendientes">_WTMATERIALESPENDIENTES</a>
<ul>
<li><strong>Pendiente</strong>: <code>SUM(DS.iCantidadSol - DS.iCantidadIng) [Pendiente]</code>
<ul>
<li><strong>DS</strong>: <a href="/IndicadoresMatriz/docs/elements/tables#almDetSolicitudes">almDetSolicitudes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Descripción</strong>: Cantidad de material en órdenes aprobadas no recibidas</p>
</li>
<li>
<p><strong>Valores esperados</strong>: Enteros ≥ 0</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="matrizconsumomaximo">MatrizConsumoMaximo<a href="#matrizconsumomaximo" class="hash-link" aria-label="Direct link to MatrizConsumoMaximo" title="Direct link to MatrizConsumoMaximo">​</a></h3>
<ul>
<li>
<p><strong>Origen</strong>:</p>
<div data-toggle-list="true"></div>
<ul>
<li>Vista [Compras].<a href="/IndicadoresMatriz/docs/elements/view#consumopromediomaterial">ConsumoPromedioMaterial</a>
<ul>
<li><code>max(a.Total)ConsumoMaximo</code>
<ul>
<li><strong>a</strong>: <code>sum(MovimientoMensual.Total) Total</code> &gt; <code>SUM(Cantidad) Total</code>
<ul>
<li><strong>cantidad</strong>: vista <a href="/IndicadoresMatriz/docs/elements/view#entradasysalidas">Compras.EntradasySalidas</a> &gt; <code>DM.iCantidad Cantidad</code>
<ul>
<li><a href="/IndicadoresMatriz/docs/elements/tables#almdetmovimientos">AlmDetMovimientos</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Descripción</strong>: Consumo máximo histórico registrado</p>
</li>
<li>
<p><strong>Valores esperados</strong>: Números reales ≥ 0</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="matrizconsumominimo">MatrizConsumoMinimo<a href="#matrizconsumominimo" class="hash-link" aria-label="Direct link to MatrizConsumoMinimo" title="Direct link to MatrizConsumoMinimo">​</a></h3>
<ul>
<li>
<p><strong>Origen</strong>:</p>
<div data-toggle-list="true"></div>
<ul>
<li>Vista [Compras].<a href="/IndicadoresMatriz/docs/elements/view#consumopromediomaterial">ConsumoPromedioMaterial</a>
<ul>
<li><code>min(a.Total)ConsumoMinimo</code>
<ul>
<li><strong>a</strong>: <code>sum(MovimientoMensual.Total) Total</code> &gt; <code>SUM(Cantidad) Total</code>
<ul>
<li><strong>cantidad</strong>: vista <a href="/IndicadoresMatriz/docs/elements/view#entradasysalidas">Compras.EntradasySalidas</a> &gt; <code>DM.iCantidad Cantidad</code>
<ul>
<li><a href="/IndicadoresMatriz/docs/elements/tables#almdetmovimientos">AlmDetMovimientos</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Descripción</strong>: Consumo mínimo histórico registrado</p>
</li>
<li>
<p><strong>Valores esperados</strong>: Números reales ≥ 0</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="matrizcomprassafetystock">MatrizComprasSafetyStock<a href="#matrizcomprassafetystock" class="hash-link" aria-label="Direct link to MatrizComprasSafetyStock" title="Direct link to MatrizComprasSafetyStock">​</a></h3>
<ul>
<li>
<p><strong>Origen</strong>:</p>
<div data-toggle-list="true"></div>
<ul>
<li>Parámetro <code>@ComprasSafetyStock</code> del SP</li>
<li>Valor fijo de <a href="/IndicadoresMatriz/docs/elements/tables#genparametrizacion">GenParametrizacion</a></li>
</ul>
</li>
<li>
<p><strong>Descripción</strong>: Días de stock de seguridad configurados</p>
</li>
<li>
<p><strong>Valores esperados</strong>: Enteros &gt; 0 (ej. 15 días)</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="campos-detallados">Campos Detallados<a href="#campos-detallados" class="hash-link" aria-label="Direct link to Campos Detallados" title="Direct link to Campos Detallados">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="matrizinventariodeposicion">MatrizInventarioDePosicion<a href="#matrizinventariodeposicion" class="hash-link" aria-label="Direct link to MatrizInventarioDePosicion" title="Direct link to MatrizInventarioDePosicion">​</a></h3>
<ul>
<li>
<p><strong>Fórmula</strong>: <code>(InventarioHoy + Transito - BackOrder)</code></p>
</li>
<li>
<p><strong>Componentes</strong>:</p>
<ol>
<li>
<p><code>InventarioHoy</code>:</p>
<ul>
<li><strong>Tabla origen</strong>: <a href="/IndicadoresMatriz/docs/elements/tables#almmatubicaciones">AlmMatUbicaciones</a></li>
<li><strong>Campo</strong>: <code>istock</code></li>
<li><strong>Proceso</strong>: Sumatoria de stock físico disponible</li>
</ul>
</li>
<li>
<p><code>Transito</code>:</p>
<ul>
<li><strong>Tabla origen</strong>: <a href="/IndicadoresMatriz/docs/elements/tables#almdetsolicitudes">almDetSolicitudes</a></li>
<li><strong>Campos</strong>: <code>iCantidadSol</code>, <code>iCantidadIng</code></li>
<li><strong>Filtros</strong>:<!-- -->
<ul>
<li>Estados 2,3,5 en <a href="/IndicadoresMatriz/docs/elements/tables#almsolicitudes">almSolicitudes</a></li>
<li>Diferencia positiva entre solicitado e ingresado</li>
</ul>
</li>
</ul>
</li>
<li>
<p><code>BackOrder</code>:</p>
<ul>
<li><strong>Tabla origen</strong>: <a href="/IndicadoresMatriz/docs/elements/tables#comprasbackordersolicitud">compras.BackOrderSolicitud</a></li>
<li><strong>Campo</strong>: <code>BackOrderSolicitudCantidadPendiente</code></li>
<li><strong>Filtro</strong>: <code>BackOrderSolicitudEstado = 1</code></li>
</ul>
</li>
</ol>
</li>
<li>
<p><strong>Descripción</strong>: Inventario neto considerando pendientes por recibir y entregar</p>
</li>
<li>
<p><strong>Valores esperados</strong>: Enteros (pueden ser negativos si hay más backorders que inventario)</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="matrizcantidadsugerida">MatrizCantidadSugerida<a href="#matrizcantidadsugerida" class="hash-link" aria-label="Direct link to MatrizCantidadSugerida" title="Direct link to MatrizCantidadSugerida">​</a></h3>
<ul>
<li>
<p><strong>Fórmula completa</strong>:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">AporteNacional </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;NO&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ISNULL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">PromedioConsumo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> ISNULL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">BackOrder</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> ISNULL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Transito</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> ISNULL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">InventarioHoy</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IIF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CostoDeInventarioUnd </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             </span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">ROUND</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sqrt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> PromedioConsumo </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> CostoDeOrdenar</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">CostoDeInventarioUnd</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> ISNULL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">BackOrder</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> ISNULL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Transito</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
</li>
<li>
<p><strong>Lógica por tipo de material</strong>:</p>
</li>
</ul>
<ol>
<li>
<p><strong>Materiales Importados</strong>:</p>
<ul>
<li><strong>Fórmula</strong>: <code>PromedioConsumo + BackOrder - Transito - InventarioHoy</code></li>
<li><strong>Componentes</strong>:<!-- -->
<ul>
<li><code>PromedioConsumo</code>: De <a href="/IndicadoresMatriz/docs/elements/view#consumopromediomaterial">Compras.ConsumoPromedioMaterial</a></li>
<li><code>BackOrder</code>: De <a href="/IndicadoresMatriz/docs/elements/tables#comprasbackordersolicitud">compras.BackOrderSolicitud</a></li>
<li><code>Transito</code>: De <a href="/IndicadoresMatriz/docs/elements/tables#almdetsolicitudes">almDetSolicitudes</a></li>
<li><code>InventarioHoy</code>: De <a href="/IndicadoresMatriz/docs/elements/tables#almmatubicaciones">AlmMatUbicaciones</a></li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Materiales Nacionales</strong>:</p>
<ul>
<li><strong>Fórmula</strong>: <code>EOQ + BackOrder - Transito</code></li>
<li><strong>Componentes EOQ</strong>:<!-- -->
<ul>
<li><code>PromedioConsumo</code>: De <a href="/IndicadoresMatriz/docs/elements/view#consumopromediomaterial">Compras.ConsumoPromedioMaterial</a></li>
<li><code>CostoDeOrdenar</code>: Calculado previamente</li>
<li><code>CostoDeInventarioUnd</code>: De <a href="/IndicadoresMatriz/docs/elements/tables#genmateriales">genMateriales</a> y <a href="/IndicadoresMatriz/docs/elements/tables#comprasliquidacionimportaciones">Compras.LiquidacionImportaciones</a></li>
</ul>
</li>
</ul>
</li>
</ol>
<ul>
<li><strong>Descripción</strong>: Cantidad recomendada para ordenar considerando:<!-- -->
<ul>
<li>Para importados: Cubrir consumo promedio y backorders, menos lo que está en tránsito e inventario</li>
<li>Para nacionales: Usar modelo EOQ ajustado por backorders y tránsito</li>
</ul>
</li>
<li><strong>Valores esperados</strong>: Enteros ≥ 0 (0 cuando no se recomienda ordenar)</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="campos-por-bodega">Campos por Bodega<a href="#campos-por-bodega" class="hash-link" aria-label="Direct link to Campos por Bodega" title="Direct link to Campos por Bodega">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="inventario-por-bodega">Inventario por Bodega<a href="#inventario-por-bodega" class="hash-link" aria-label="Direct link to Inventario por Bodega" title="Direct link to Inventario por Bodega">​</a></h3>
<ul>
<li>
<p><strong>Pruebas_Almacén Zonal calle 80</strong></p>
</li>
<li>
<p><strong>Pruebas_Tintal</strong></p>
</li>
<li>
<p><strong><em>Pruebas_Alimentadores</em></strong></p>
</li>
<li>
<p><strong>Pruebas_Suba</strong></p>
</li>
<li>
<p><strong>Origen</strong>:</p>
<div data-toggle-list="true"></div>
<ul>
<li>CTE <a href="/IndicadoresMatriz/docs/elements/with#_pivotinventario">_PIVOTINVENTARIO</a></li>
<li>Datos base de <a href="/IndicadoresMatriz/docs/elements/tables#almmatubicaciones">AlmMatUbicaciones</a></li>
</ul>
</li>
<li>
<p><strong>Proceso</strong>: Pivot de bodegas 1,2,8,23</p>
</li>
<li>
<p><strong>Descripción</strong>: Desglose del inventario físico por ubicación</p>
</li>
<li>
<p><strong>Valores esperados</strong>: Enteros ≥ 0</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="consumo-por-bodega">Consumo por Bodega<a href="#consumo-por-bodega" class="hash-link" aria-label="Direct link to Consumo por Bodega" title="Direct link to Consumo por Bodega">​</a></h3>
<ul>
<li>
<p><strong>Consumo Almacén Zonal calle 80</strong></p>
</li>
<li>
<p><strong>Consumo Tintal</strong></p>
</li>
<li>
<p><strong>Consumo Alimentadores</strong></p>
</li>
<li>
<p><strong>Consumo Suba</strong></p>
</li>
<li>
<p><strong>Origen</strong>:</p>
<div data-toggle-list="true"></div>
<ul>
<li>CTE <a href="/IndicadoresMatriz/docs/elements/with#_pivotconsumo">_PIVOTCONSUMO</a></li>
<li>Datos base de <a href="/IndicadoresMatriz/docs/elements/tables#almdetmovimientos">AlmDetMovimientos</a></li>
</ul>
</li>
<li>
<p><strong>Proceso</strong>: Pivot de consumos por bodega</p>
</li>
<li>
<p><strong>Descripción</strong>: Desglose histórico de consumos por ubicación</p>
</li>
<li>
<p><strong>Valores esperados</strong>: Enteros ≥ 0</p>
</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/output_data.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/IndicadoresMatriz/docs/legible_output_data"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">FÓRMULAS DE GESTIÓN DE INVENTARIOS</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#campos-principales" class="table-of-contents__link toc-highlight">Campos Principales</a><ul><li><a href="#matrizaportenacional" class="table-of-contents__link toc-highlight">MatrizAporteNacional</a></li><li><a href="#matrizidmaterial" class="table-of-contents__link toc-highlight">MatrizIdMaterial</a></li><li><a href="#matriznommaterial" class="table-of-contents__link toc-highlight">MatriznomMaterial</a></li><li><a href="#matrizinventariohoy" class="table-of-contents__link toc-highlight">MatrizInventarioHoy</a></li><li><a href="#matrizconsumoanalisis" class="table-of-contents__link toc-highlight">MatrizConsumoAnalisis</a></li><li><a href="#matrizcostototal" class="table-of-contents__link toc-highlight">MatrizCostoTotal</a></li><li><a href="#matrizcontribucion" class="table-of-contents__link toc-highlight">MatrizContribucion</a></li><li><a href="#matrizcostounitario" class="table-of-contents__link toc-highlight">MatrizCostoUnitario</a></li><li><a href="#matrizclasificacion" class="table-of-contents__link toc-highlight">MatrizClasificacion</a></li><li><a href="#matriznomproveedor" class="table-of-contents__link toc-highlight">MatrizNomProveedor</a></li><li><a href="#matrizleadtime" class="table-of-contents__link toc-highlight">MatrizLeadTime</a></li><li><a href="#matrizpromedioconsumo" class="table-of-contents__link toc-highlight">MatrizPromedioConsumo</a></li><li><a href="#matrizdesvestandar" class="table-of-contents__link toc-highlight">MatrizDesvEstandar</a></li><li><a href="#matrizsafetystock" class="table-of-contents__link toc-highlight">MatrizSafetyStock</a></li><li><a href="#matrizreorderpoint" class="table-of-contents__link toc-highlight">MatrizReorderPoint</a></li><li><a href="#matrizcostodeordenar" class="table-of-contents__link toc-highlight">MatrizCostoDeOrdenar</a></li><li><a href="#matrizcostodeinventariound" class="table-of-contents__link toc-highlight">MatrizCostoDeInventarioUnd</a></li><li><a href="#matrizpreciodecompra" class="table-of-contents__link toc-highlight">MatrizPrecioDeCompra</a></li><li><a href="#matrizeoq" class="table-of-contents__link toc-highlight">MatrizEOQ</a></li><li><a href="#matrizorden" class="table-of-contents__link toc-highlight">MatrizOrden</a></li><li><a href="#matrizbackorder" class="table-of-contents__link toc-highlight">MatrizBackOrder</a></li><li><a href="#matriztransito" class="table-of-contents__link toc-highlight">MatrizTransito</a></li><li><a href="#matrizconsumomaximo" class="table-of-contents__link toc-highlight">MatrizConsumoMaximo</a></li><li><a href="#matrizconsumominimo" class="table-of-contents__link toc-highlight">MatrizConsumoMinimo</a></li><li><a href="#matrizcomprassafetystock" class="table-of-contents__link toc-highlight">MatrizComprasSafetyStock</a></li></ul></li><li><a href="#campos-detallados" class="table-of-contents__link toc-highlight">Campos Detallados</a><ul><li><a href="#matrizinventariodeposicion" class="table-of-contents__link toc-highlight">MatrizInventarioDePosicion</a></li><li><a href="#matrizcantidadsugerida" class="table-of-contents__link toc-highlight">MatrizCantidadSugerida</a></li></ul></li><li><a href="#campos-por-bodega" class="table-of-contents__link toc-highlight">Campos por Bodega</a><ul><li><a href="#inventario-por-bodega" class="table-of-contents__link toc-highlight">Inventario por Bodega</a></li><li><a href="#consumo-por-bodega" class="table-of-contents__link toc-highlight">Consumo por Bodega</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/IndicadoresMatriz/docs">Tutorial</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://x.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/IndicadoresMatriz/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>